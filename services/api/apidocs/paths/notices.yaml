# Notices & Notifications API Paths

/admin/notices:
  get:
    operationId: listNotices
    tags: [Notices]
    summary: List notices and circulars
    description: Returns notices for the tenant with filtering by status and audience.
    parameters:
      - name: status
        in: query
        schema: { type: string, enum: [draft, published, archived] }
      - name: audience
        in: query
        schema: { type: string, enum: [all, parents, teachers, students, staff] }
      - name: limit
        in: query
        schema: { type: integer, default: 50 }
      - name: offset
        in: query
        schema: { type: integer, default: 0 }
    responses:
      '200':
        description: Notice list
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  id: { type: string, format: uuid }
                  title: { type: string }
                  content: { type: string }
                  status: { type: string }
                  audience: { type: string }
                  published_at: { type: string, format: date-time }
  post:
    operationId: createNotice
    tags: [Notices]
    summary: Create a notice (as draft)
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required: [title, content]
            properties:
              title: { type: string, example: "Annual Day Celebration" }
              content: { type: string, description: "Markdown-formatted content" }
              audience: { type: string, enum: [all, parents, teachers, students, staff], default: all }
              attachments: { type: array, items: { type: string, format: uri } }
    responses:
      '201':
        description: Notice created as draft

/admin/notices/{id}:
  get:
    operationId: getNotice
    tags: [Notices]
    summary: Get notice detail
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    responses:
      '200':
        description: Notice detail
  put:
    operationId: updateNotice
    tags: [Notices]
    summary: Update a notice
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              title: { type: string }
              content: { type: string }
              audience: { type: string }
    responses:
      '200':
        description: Notice updated
  delete:
    operationId: deleteNotice
    tags: [Notices]
    summary: Delete a notice
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    responses:
      '200':
        description: Notice deleted

/admin/notices/{id}/publish:
  post:
    operationId: publishNotice
    tags: [Notices]
    summary: Publish a notice
    description: Changes notice status from draft to published and sends notifications.
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    responses:
      '200':
        description: Notice published

